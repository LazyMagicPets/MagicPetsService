  __LambdaName__:
    # Generated by __ResourceGenerator__ from __TemplateSource__
    Type: AWS::Serverless::Function
    Properties:
      # Here's the C# specific handler format
      PackageType: Zip
      CodeUri: ../../__OutputDir/__LambdaName__/bin/Release/__DotnetTarget__
             # container::namespace.class::method
      Handler: __LambdaName__::LambdaFunc.LambdaEntryPoint::FunctionHandlerAsync
      Runtime: __Runtime__
      Description: Processes SQS messages to send notifications to subscribers
      MemorySize: __MemorySize__
      Timeout: __Timeout__
      Tracing: __Tracing__
      Policies:
      - Statement:
        - Effect: Allow
          Action:
          - execute-api:ManageConnections
          Resource:
          # Allow the function to manage WebSocket connections. 
          # Primary use is to broadcast messages to subscribers.
          - Fn::Sub: arn:${AWS::Partition}:execute-api:${AWS::Region}:${AWS::AccountId}:${WebSocketApi}/*/* 
      Events:
        # SAM automatically adds necessary permisssions to read the queue
        SQSTrigger:
          Type: SQS
          Properties:
            Queue: !GetAtt __MessageQueue__.Arn
            BatchSize: 10

      Environment:
        Variables:
          WEBSOCKET_MGMT_URL:
            Fn::Sub: wss://${WebSocketApi}.execute-api.${AWS::Region}.amazonaws.com/${EnvironmentParameter}/@connections 